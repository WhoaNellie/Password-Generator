<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Password Generator</title>
  </head>
  <body>
    <header>
      <h1>Password Generator</h1>
    </header>
    <h2>Generate a Password</h2>

        <h3>Select Criteria</h3>

        Password Length: <input type="range" id="len" min="8" max="128">

        <input type="checkbox" name="lowercase" id="lower"> Lowercase letters<br>
        <input type="checkbox" name="uppercase" id="upper"> Uppercase letters<br>
        <input type="checkbox" name="numeric" id="number"> Numbers 0-9 <br>
        <input type="checkbox" name="special" id="special"> Special characters (? ! . _ , etc.)<br>
        <input type="checkbox" name="selAll" id="all"> Select all<br>


    <textarea
      readonly
      id="password"
      placeholder="Your Secure Password"
      aria-label="Generated Password"
    ></textarea>

    <button id="generate">Generate Password</button>
    <button id="copy">
      Copy to Clipboard
    </button>

  </body>
  <script type="text/javascript">

    var lcStr = "abcdefghijklmnopqrstuvwqyz";
        var lcRegex = RegExp ("abcdefghijklmnopqrstuvwqyz");
    var ucStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        var ucRegex = RegExp ("ABCDEFGHIJKLMNOPQRSTUVWXYZ");
    var intStr = "0123456789";
        var intRegex = RegExp ("0123456789");
    var specStr = " !\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";
        var specRegex = RegExp (" !\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~");
    
    var passLen = document.getElementById("len").value;

    var checkLow = document.getElementById("lower");
    var checkUp = document.getElementById("upper");
    var checkNum = document.getElementById("number");
    var checkSpec = document.getElementById("special");
    var checkAll = document.getElementById("all");

    var selectFrom = "";
    var genPass = "";

        // on generate click
        if (
            !checkLow.checked &&
            !checkUp.checked &&
            !checkSpec.checked &&
            !checkNum.checked &&
            !checkAll.checked
        ){
            alert("Please check at least one password criteria");
        }

        
        selectFrom =
        (checkAll.checked || checkLow.checked ? lcStr : '') + 
        (checkAll.checked || checkUp.checked ? ucStr : '') +
        (checkAll.checked || checkNum.checked ? intStr : '') +
        (checkAll.checked || checkSpec.checked ? specStr : '');
        
        function passOk (pWord){
            if (
                (checkLow.checked && !lcRegex.test(pWord))||
                (checkUp.checked && !ucRegex.text(pWord)) ||
                (checkNum.checked && !intRegex.text(pWord))||
                (checkSpec.checked && !specRegex.text(pWord))
            ){ 

                return false;

            }else if (checkAll.checked && 
                (
                    !lcRegex.test(pWord) ||
                    !ucRegex.text(pWord) ||
                    !intRegex.text(pWord)||
                    !specRegex.text(pWord)
                )){

                    return false;

            }else{

                return true;
            }

        }

        do{
            genPass = "";
            for (var i = 0; i < passLen; i++){
                var rand = Math.floor(Math.random() * selectFrom.length);
                genPass = genPass + selectFrom.charAt(rand);
            }
        }while(!passOk(genPass))

  </script>
</html>
